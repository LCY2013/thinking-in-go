## 项目目录创建

- docker pull micro/micro

- docker run --rm -v $(pwd):$(pwd) -w $(pwd) micro/micro new 模块名称

> docker run --rm -v $(pwd):$(pwd) -w $(pwd) micro/micro new github.com/LCY2013/thinking-in-go/micro-with-containerization/user

## 编写代码

## 交叉编译

- CGO_ENABLED=0 GOOS=linux GOARCH=arm64 go build -o user *.go

## 基于二进制构建镜像

- docker build -t user:latest .

## 服务注册中心consul安装

- docker pull consul

```shell
# 单机安装
docker run -d -p 8500:8500 --name=dev-consul consul

# 集群安装
docker run -d -p 8500:8500 --name=dev-consul -e CONSUL_BIND_INTERFACE=eth0 consul

docker run -d -e CONSUL_BIND_INTERFACE=eth0 consul agent -dev -join=172.17.0.2

docker run -d -e CONSUL_BIND_INTERFACE=eth0 consul agent -dev -join=172.17.0.2
```

### consul控制台

> http://127.0.0.1:8500/ui/dc1/services

### 利用自定义的micro生成服务脚手架

> docker run --rm -v $(pwd):$(pwd) -w $(pwd) luochunyun/micro new github.com/LCY2013/thinking-in-go/micro-with-containerization/category


